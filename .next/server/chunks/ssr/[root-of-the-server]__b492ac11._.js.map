{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/sonjutha/Downloads/Bus-system/src/lib/formatters.js"],"sourcesContent":["// Shared UI formatters\n\n// Format welcome text consistently across pages\n// Returns a string like: \"ยินดีต้อนรับ, {displayName} {Dept1, Dept2} ({Plant1, Plant2})\"\n// Inputs:\n// - user: { display_name, username, department, plant_id, department_id, department_ids }\n// - departments: [{ id, code, name, plant_id, plant_code }]\n// - plants: [{ id, code, name }]\nexport function formatWelcome(user, departments = [], plants = []) {\n  if (!user) return \"\";\n  const displayName = user.display_name || user.username || \"\";\n\n  // Special display for adminga: show all plant codes to reflect global scope\n  try {\n    const isAdminga = String(user.username || '').toLowerCase() === 'adminga';\n    if (isAdminga) {\n      const allPlantCodes = (plants || []).map(p => p?.code).filter(Boolean);\n      if (allPlantCodes.length) {\n        return `${displayName} ${allPlantCodes.join(' ')}`;\n      }\n      // Fallback to default formatting below if no plants are loaded yet\n    }\n  } catch {}\n\n  // Collect department ids (multi first, then single, else none)\n  const deptIds = (Array.isArray(user.department_ids) && user.department_ids.length)\n    ? user.department_ids\n    : (user.department_id ? [user.department_id] : []);\n\n  // Build department label list\n  const deptLabels = [];\n  const plantCodesFromDepts = new Set();\n  if (deptIds.length) {\n    for (const id of deptIds) {\n      const d = (departments || []).find(x => x.id === id);\n      if (d) {\n        const label = d.code || d.name || \"\";\n        if (label) deptLabels.push(label);\n        if (d.plant_code) plantCodesFromDepts.add(d.plant_code);\n        else if (d.plant_id) {\n          const p = (plants || []).find(pp => pp.id === d.plant_id);\n          if (p?.code) plantCodesFromDepts.add(p.code);\n        }\n      }\n    }\n  }\n\n  // Fallback dept label when master data is missing\n  if (!deptLabels.length && user.department) {\n    deptLabels.push(user.department);\n  }\n\n  // Build plant code list\n  const plantLabels = new Set(plantCodesFromDepts);\n  if (!plantLabels.size && user.plant_id) {\n    const p = (plants || []).find(pp => pp.id === user.plant_id);\n    if (p?.code) plantLabels.add(p.code);\n  }\n\n  const deptStr = deptLabels.join(\", \");\n  const plantStr = Array.from(plantLabels).join(\", \");\n\n  const tail = plantStr ? ` (${plantStr})` : (user.department && !deptStr ? ` (${user.department})` : \"\");\n  return `${displayName}${deptStr ? ` ${deptStr}` : \"\"}${tail}`;\n}\n"],"names":[],"mappings":"AAAA,uBAAuB;AAEvB,gDAAgD;AAChD,yFAAyF;AACzF,UAAU;AACV,0FAA0F;AAC1F,4DAA4D;AAC5D,iCAAiC;;;;;AAC1B,SAAS,cAAc,IAAI,EAAE,cAAc,EAAE,EAAE,SAAS,EAAE;IAC/D,IAAI,CAAC,MAAM,OAAO;IAClB,MAAM,cAAc,KAAK,YAAY,IAAI,KAAK,QAAQ,IAAI;IAE1D,4EAA4E;IAC5E,IAAI;QACF,MAAM,YAAY,OAAO,KAAK,QAAQ,IAAI,IAAI,WAAW,OAAO;QAChE,IAAI,WAAW;YACb,MAAM,gBAAgB,CAAC,UAAU,EAAE,EAAE,GAAG,CAAC,CAAA,IAAK,GAAG,MAAM,MAAM,CAAC;YAC9D,IAAI,cAAc,MAAM,EAAE;gBACxB,OAAO,GAAG,YAAY,CAAC,EAAE,cAAc,IAAI,CAAC,MAAM;YACpD;QACA,mEAAmE;QACrE;IACF,EAAE,OAAM,CAAC;IAET,+DAA+D;IAC/D,MAAM,UAAU,AAAC,MAAM,OAAO,CAAC,KAAK,cAAc,KAAK,KAAK,cAAc,CAAC,MAAM,GAC7E,KAAK,cAAc,GAClB,KAAK,aAAa,GAAG;QAAC,KAAK,aAAa;KAAC,GAAG,EAAE;IAEnD,8BAA8B;IAC9B,MAAM,aAAa,EAAE;IACrB,MAAM,sBAAsB,IAAI;IAChC,IAAI,QAAQ,MAAM,EAAE;QAClB,KAAK,MAAM,MAAM,QAAS;YACxB,MAAM,IAAI,CAAC,eAAe,EAAE,EAAE,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;YACjD,IAAI,GAAG;gBACL,MAAM,QAAQ,EAAE,IAAI,IAAI,EAAE,IAAI,IAAI;gBAClC,IAAI,OAAO,WAAW,IAAI,CAAC;gBAC3B,IAAI,EAAE,UAAU,EAAE,oBAAoB,GAAG,CAAC,EAAE,UAAU;qBACjD,IAAI,EAAE,QAAQ,EAAE;oBACnB,MAAM,IAAI,CAAC,UAAU,EAAE,EAAE,IAAI,CAAC,CAAA,KAAM,GAAG,EAAE,KAAK,EAAE,QAAQ;oBACxD,IAAI,GAAG,MAAM,oBAAoB,GAAG,CAAC,EAAE,IAAI;gBAC7C;YACF;QACF;IACF;IAEA,kDAAkD;IAClD,IAAI,CAAC,WAAW,MAAM,IAAI,KAAK,UAAU,EAAE;QACzC,WAAW,IAAI,CAAC,KAAK,UAAU;IACjC;IAEA,wBAAwB;IACxB,MAAM,cAAc,IAAI,IAAI;IAC5B,IAAI,CAAC,YAAY,IAAI,IAAI,KAAK,QAAQ,EAAE;QACtC,MAAM,IAAI,CAAC,UAAU,EAAE,EAAE,IAAI,CAAC,CAAA,KAAM,GAAG,EAAE,KAAK,KAAK,QAAQ;QAC3D,IAAI,GAAG,MAAM,YAAY,GAAG,CAAC,EAAE,IAAI;IACrC;IAEA,MAAM,UAAU,WAAW,IAAI,CAAC;IAChC,MAAM,WAAW,MAAM,IAAI,CAAC,aAAa,IAAI,CAAC;IAE9C,MAAM,OAAO,WAAW,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC,GAAI,KAAK,UAAU,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC,GAAG;IACpG,OAAO,GAAG,cAAc,UAAU,CAAC,CAAC,EAAE,SAAS,GAAG,KAAK,MAAM;AAC/D","debugId":null}},
    {"offset": {"line": 93, "column": 0}, "map": {"version":3,"sources":["file:///Users/sonjutha/Downloads/Bus-system/src/app/truck-table/page.jsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useMemo, useRef, useState, Fragment } from 'react';\nimport { useRouter } from 'next/navigation';\nimport html2canvas from 'html2canvas';\nimport { formatWelcome } from '@/lib/formatters';\n\nexport default function TruckTable() {\n  const router = useRouter();\n  const [date, setDate] = useState(() => new Date().toISOString().slice(0,10));\n  const [user, setUser] = useState(null);\n  const [plants, setPlants] = useState([]); // AC/RF/SSC\n  const [departments, setDepartments] = useState([]);\n  const [routes, setRoutes] = useState([]);\n  const [shifts, setShifts] = useState([]);\n  const [shiftId, setShiftId] = useState(null);\n  const [departTimes, setDepartTimes] = useState([]); // by shift\n  const [countsBy, setCountsBy] = useState({}); // { dtId: { routeId: { plantId: totalCount } , ttl: { routeId: total } } }\n  const [carPlan, setCarPlan] = useState({}); // { dtId: { routeId: car_count } }\n  const [carModal, setCarModal] = useState({ open:false, dt:null, route:null, value:0 });\n  const captureRef = useRef(null);\n\n  useEffect(() => {\n    try { const u = JSON.parse(localStorage.getItem('user')||'null'); setUser(u); } catch {}\n  }, []);\n\n  const plantOrder = useMemo(() => ['AC','RF','SSC'], []);\n  const plantsSorted = useMemo(() => {\n    return [...plants].sort((a,b) => {\n      const ia = plantOrder.indexOf(a.code);\n      const ib = plantOrder.indexOf(b.code);\n      const sa = ia === -1 ? 999 : ia;\n      const sb = ib === -1 ? 999 : ib;\n      if (sa !== sb) return sa - sb;\n      return String(a.code||'').localeCompare(String(b.code||''));\n    });\n  }, [plants, plantOrder]);\n\n  const loadMasters = async () => {\n    const token = localStorage.getItem('token');\n    const [p, r, s, d] = await Promise.all([\n      fetch('/api/ot/plants', { headers:{ Authorization:`Bearer ${token}` }}),\n      fetch('/api/ot/routes'),\n      fetch('/api/ot/shifts', { headers:{ Authorization:`Bearer ${token}` }}),\n      fetch('/api/ot/departments', { headers:{ Authorization:`Bearer ${token}` }})\n    ]);\n    const parseMaybeJson = async (res) => {\n      const ct = res.headers.get('content-type') || '';\n      if (ct.includes('application/json')) {\n        try { return await res.json(); } catch { return null; }\n      }\n      return null;\n    };\n    const [plantRowsRaw, routeRowsRaw, shiftRowsRaw, deptRowsRaw] = await Promise.all([\n      parseMaybeJson(p), parseMaybeJson(r), parseMaybeJson(s), parseMaybeJson(d)\n    ]);\n    setPlants(Array.isArray(plantRowsRaw)? plantRowsRaw: []);\n    setRoutes(Array.isArray(routeRowsRaw)? routeRowsRaw: []);\n    const sh = Array.isArray(shiftRowsRaw)? shiftRowsRaw: [];\n    setShifts(sh);\n    setDepartments(Array.isArray(deptRowsRaw)? deptRowsRaw: []);\n    if (!shiftId && sh.length) setShiftId(sh[0].id);\n  };\n\n  useEffect(() => { loadMasters(); }, []);\n\n  const loadDepartTimes = async (sid) => {\n    if (!sid) return setDepartTimes([]);\n    const token = localStorage.getItem('token');\n  const res = await fetch(`/api/ot/depart-times?shiftId=${sid}`, { headers:{ Authorization:`Bearer ${token}` }, cache: 'no-store' });\n    const ct = res.headers.get('content-type') || '';\n    let data = null;\n    if (ct.includes('application/json')) { try { data = await res.json(); } catch { data = null; } }\n    setDepartTimes(Array.isArray(data) ? data : []);\n  };\n  useEffect(() => { loadDepartTimes(shiftId); }, [shiftId]);\n\n  // Aggregate per depart time -> per route -> per plant (sum across departments)\n  const loadCounts = async () => {\n    if (!date || !shiftId || departTimes.length===0) { setCountsBy({}); return; }\n    const token = localStorage.getItem('token');\n    const acc = {};\n    for (const dt of departTimes) {\n      try {\n        const res = await fetch(`/api/ot/counts?date=${date}&shiftId=${shiftId}&departTimeId=${dt.id}`, { headers:{ Authorization:`Bearer ${token}` }});\n        const ct = res.headers.get('content-type') || '';\n        let rows = [];\n        if (ct.includes('application/json')) { try { rows = await res.json(); } catch { rows = []; } }\n        const map = {};\n        for (const row of (Array.isArray(rows)? rows: [])) {\n          const rId = row.route_id; const pId = row.plant_id; const c = Number(row.count)||0;\n          if (!map[rId]) map[rId] = {};\n          map[rId][pId] = (map[rId][pId]||0) + c; // sum across departments\n        }\n        // compute ttl per route\n        const ttl = {};\n        Object.keys(map).forEach(rId => {\n          ttl[rId] = Object.values(map[rId]).reduce((s,v)=> s + (Number(v)||0), 0);\n        });\n        acc[dt.id] = { map, ttl };\n      } catch {\n        acc[dt.id] = { map:{}, ttl:{} };\n      }\n    }\n    setCountsBy(acc);\n  };\n  useEffect(() => { loadCounts(); }, [date, shiftId, departTimes]);\n\n  // Load car plan overrides per depart time\n  const loadCarPlan = async () => {\n    if (!date || !shiftId || departTimes.length===0) { setCarPlan({}); return; }\n    const token = localStorage.getItem('token');\n    const acc = {};\n    for (const dt of departTimes) {\n      try {\n        const res = await fetch(`/api/ot/cars?date=${date}&shiftId=${shiftId}&departTimeId=${dt.id}`, { headers:{ Authorization:`Bearer ${token}` } });\n        const ct = res.headers.get('content-type')||'';\n        let rows = [];\n        if (ct.includes('application/json')) { try { rows = await res.json(); } catch { rows = []; } }\n        const m = {};\n        for (const r of (Array.isArray(rows)?rows:[])) m[r.route_id] = Number(r.car_count)||0;\n        acc[dt.id] = m;\n      } catch { acc[dt.id] = {}; }\n    }\n    setCarPlan(acc);\n  };\n  useEffect(() => { loadCarPlan(); }, [date, shiftId, departTimes]);\n\n  const findPlantIdByCode = (code) => (plants.find(p=>p.code===code)?.id);\n\n  const calcVehicles = (people) => {\n    const n = Number(people)||0;\n    if (n <= 6) return 0;\n    return Math.ceil(n/50);\n  };\n\n  const handleSaveAsImage = async () => {\n    if (!captureRef.current) return;\n    const canvas = await html2canvas(captureRef.current, {\n      backgroundColor: isNightShift ? '#000000' : '#ffffff',\n    });\n    const link = document.createElement('a');\n    link.download = `truck-table-${date}.png`;\n    link.href = canvas.toDataURL('image/png');\n    link.click();\n  };\n  const handleLogout = () => { try { localStorage.removeItem('token'); localStorage.removeItem('user'); } catch {} router.push('/'); };\n  const isAdminga = useMemo(() => String(user?.username||'').toLowerCase()==='adminga', [user]);\n  // Night shift detection (กะกลางคืน)\n  // แก้หน้างาน ให้กะกลางคืน (19:50) พื้นหลังดำ และเลื่อน 19:50 ไปซ้ายสุด และ เปลี่ยนจากเวลาออกเป็นเวลาเข้า\n  //\n  //\n  //\n  //\n  //\n  const isNightShift = useMemo(() => {\n    try {\n      const s = shifts.find(x => x.id === shiftId);\n      const name = String(s?.name_th || s?.name_en || '');\n      return /กลางคืน/i.test(name) || /night/i.test(name);\n    } catch { return false; }\n  }, [shifts, shiftId]);\n  // For display: always show entry times (is_entry=1) on the left, followed by exit times\n  const displayDepartTimes = useMemo(() => {\n    const list = Array.isArray(departTimes) ? [...departTimes] : [];\n    return list.sort((a,b) => {\n      const ae = Number(a?.is_entry)||0; const be = Number(b?.is_entry)||0; // entry=1 should come first\n      if (ae !== be) return be - ae; // 1 before 0\n      const ta = String(a?.time||'');\n      const tb = String(b?.time||'');\n      return ta.localeCompare(tb);\n    });\n  }, [departTimes]);\n  //\n  //\n  //\n  //\n  //\n  //\n  const openCarEdit = (dt, route, ttl) => {\n    if (!isAdminga) return; // only adminga can edit\n    const curr = Number(carPlan?.[dt.id]?.[route.id] ?? calcVehicles(ttl));\n    setCarModal({ open:true, dt, route, value: curr });\n  };\n  const saveCarPlan = async () => {\n    if (!carModal.open || !carModal.dt || !carModal.route) return;\n    try {\n      const token = localStorage.getItem('token');\n      const body = { the_date: date, shift_id: shiftId, depart_time_id: carModal.dt.id, route_id: carModal.route.id, car_count: Math.max(0, Number(carModal.value)||0) };\n      const res = await fetch('/api/ot/cars', { method:'POST', headers:{ 'Content-Type':'application/json', Authorization:`Bearer ${token}` }, body: JSON.stringify(body) });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error||'บันทึกล้มเหลว');\n      setCarModal({ open:false, dt:null, route:null, value:0 });\n      await loadCarPlan();\n    } catch (e) {\n      alert(String(e.message||e));\n    }\n  };\n  const closeCarModal = () => setCarModal({ open:false, dt:null, route:null, value:0 });\n\n  // Greeting labels\n  const welcomeText = useMemo(() => formatWelcome(user, departments, plants), [user, departments, plants]);\n\n  return (\n    <div style={{\n      ...styles.wrapper,\n      ...(isNightShift ? { background: '#000000' } : {})\n    }}>\n      <div style={styles.stack}>\n        {/* Panel: Header */}\n        <div style={{ ...styles.panelCard, paddingBottom: 16 }}>\n          <div style={styles.headerRow}>\n          <div>\n            <h1 style={styles.title}>ตารางจัดรถขากลับ</h1>\n            <div style={{ color:'#2f3e4f', fontWeight:600 }}>\n              ยินดีต้อนรับ, {welcomeText}\n            </div>\n          </div>\n          <div style={{ display:'flex', alignItems:'center', gap:12 }}>\n            <div style={{ fontSize:18, color:'#2f3e4f' }}>{new Date().toLocaleDateString('th-TH', { year:'numeric', month:'long', day:'numeric' })}</div>\n            <button onClick={()=>router.push('/')} style={{ ...styles.logoutBtn, background:'#34495e' }}>กลับเมนูหลัก</button>\n            <button onClick={handleLogout} style={styles.logoutBtn}>ออกจากระบบ</button>\n          </div>\n          </div>\n        </div>\n        {/* Capture Wrapper: Controls + Table */}\n        <div ref={captureRef}>\n          {/* Panel: Controls */}\n          <div style={{ ...styles.panelCard, paddingTop: 16 }}>\n            <div style={styles.controls}>\n            <div style={{ display:'flex', alignItems:'center', gap:10 }}>\n              <span style={styles.label}>เลือกวันที่:</span>\n              <input type=\"date\" value={date} onChange={e=> setDate(e.target.value)} style={styles.input} />\n            </div>\n            <div style={{ display:'flex', alignItems:'center', gap:10 }}>\n              <span style={styles.label}>กะ:</span>\n              <select value={shiftId||''} onChange={e=> setShiftId(Number(e.target.value)||null)} style={styles.input}>\n                {shifts.map(s => <option key={s.id} value={s.id}>{s.name_th || s.name_en}</option>)}\n              </select>\n            </div>\n            <button style={styles.primaryBtn} onClick={handleSaveAsImage}>บันทึกรูปภาพ</button>\n            </div>\n          </div>\n          {/* Panel: Table */}\n          <div style={{ ...styles.panelCardTight }}>\n            <div style={{ width:'100%', overflowX:'auto' }}>\n              <table style={styles.table}>\n            <thead>\n              <tr>\n                <th style={{...styles.thMain, width:280, textAlign:'center'}} rowSpan={2}>สายรถ</th>\n                {displayDepartTimes.map((dt, idx) => (\n                  <th\n                    key={dt.id}\n                    colSpan={(plantsSorted?.length || 0) + 2}\n                    style={{...styles.thTime, background:getTimeColor(idx)}}\n                  >\n                    {(() => { const t = String(dt.time).slice(0,5); const prefix = Number(dt.is_entry)? 'เวลาเข้า' : 'เวลาออก'; return (<>{prefix} <strong>{t}</strong></>); })()}\n                  </th>\n                ))}\n              </tr>\n              <tr>\n                {displayDepartTimes.map((dt) => (\n                  <Fragment key={`hdr-${dt.id}`}>\n                    {plantsSorted.map(p => <th key={`p-${dt.id}-${p.id}`} style={styles.thMain}>{p.code}</th>)}\n                    <th key={`ttl-${dt.id}`} style={styles.thMain}>TTL</th>\n                    <th\n                      key={`car-${dt.id}`}\n                      style={{ ...styles.thMain, whiteSpace: 'normal', lineHeight: 1.2, paddingTop: 6, paddingBottom: 6 }}\n                    >\n                      จำนวน<wbr/>รถ\n                    </th>\n                  </Fragment>\n                ))}\n              </tr>\n            </thead>\n            <tbody>\n              {routes.map((r, index) => (\n                <tr key={r.id}>\n                  <td style={styles.tdRoute}><span style={styles.routeIndex}>{index+1}.</span> <span>{r.name}</span></td>\n                  {displayDepartTimes.map((dt, dtIdx) => {\n                    const rec = countsBy[dt.id] || { map:{}, ttl:{} };\n                    const ttl = Number(rec.ttl?.[r.id]||0);\n                    return (\n                      <Fragment key={`row-${r.id}-${dt.id}`}>\n                        {plantsSorted.map(p => {\n                          const pid = p.id; const val = Number(rec.map?.[r.id]?.[pid]||0);\n                          return (\n                            <td key={`cell-${dt.id}-${r.id}-${pid}`} style={{ ...styles.tdCell, background: getTimeBodyBg(dtIdx) }}>\n                              {val>0 ? <span style={{ fontWeight: 700 }}>{val} </span> : ''}\n                            </td>\n                          );\n                        })}\n                        <td key={`ttl-${dt.id}-${r.id}`} style={{...styles.tdCell, background: getTimeTotalBg(dtIdx)}}>{ttl>0? <span style={{ fontWeight: 800 }}>{ttl} </span> : ''}</td>\n                        <td\n                          key={`car-${dt.id}-${r.id}`}\n                          style={{\n                            ...styles.tdCell,\n                            cursor: isAdminga ? 'pointer' : 'default',\n                            background: getTimeCarBg(dtIdx)\n                          }}\n                          onClick={() => openCarEdit(dt, r, ttl)}\n                        >\n                          <span style={{ fontWeight: 900 }}>\n                            {(() => { const c = Number(carPlan?.[dt.id]?.[r.id] ?? calcVehicles(ttl)) || 0; return `${c} คัน`; })()}\n                          </span>\n                        </td>\n                      </Fragment>\n                    );\n                  })}\n                </tr>\n              ))}\n\n              {/* Totals row */}\n              <tr key=\"totals-row\">\n                <td style={styles.tdRouteTotal}><strong>รวม</strong></td>\n                {displayDepartTimes.map((dt, dtIdx) => {\n                  const rec = countsBy[dt.id] || { map:{}, ttl:{} };\n                  // Sum per plant across all routes\n                  const plantTotals = plantsSorted.map((p) => {\n                    let sum = 0;\n                    for (const r of routes) {\n                      sum += Number(rec.map?.[r.id]?.[p.id] || 0);\n                    }\n                    return sum;\n                  });\n                  // Sum TTL across routes\n                  let ttlTotal = 0;\n                  for (const r of routes) ttlTotal += Number(rec.ttl?.[r.id] || 0);\n                  // Sum vehicles (use override if exists, else derived from ttl)\n                  let totalVehicles = 0;\n                  for (const r of routes) {\n                    const rTtl = Number(rec.ttl?.[r.id] || 0);\n                    const cars = Number(carPlan?.[dt.id]?.[r.id] ?? calcVehicles(rTtl)) || 0;\n                    totalVehicles += cars;\n                  }\n                  return (\n                    <Fragment key={`totals-${dt.id}`}>\n                      {plantTotals.map((val, i) => (\n                        <td key={`tot-${dt.id}-p-${i}`} style={{ ...styles.tdTotal, background: getTimeBodyBg(dtIdx) }}><strong>{val>0 ? val : ''}</strong></td>\n                      ))}\n                      <td key={`tot-${dt.id}-ttl`} style={{ ...styles.tdTotal, background: getTimeTotalBg(dtIdx) }}><strong>{ttlTotal>0 ? ttlTotal : ''}</strong></td>\n                      <td key={`tot-${dt.id}-cars`} style={{ ...styles.tdTotal, background: getTimeCarBg(dtIdx) }}><strong>{`${totalVehicles} คัน`}</strong></td>\n                    </Fragment>\n                  );\n                })}\n              </tr>\n            </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n\n        {carModal.open && (\n          <>\n            <div style={styles.overlay} onClick={closeCarModal} />\n            <div style={styles.modal}\n                 onClick={(e)=> e.stopPropagation()}>\n              <h2 style={styles.modalTitle}>แก้ไขจำนวนรถ</h2>\n              <div style={{ marginBottom:10, color:'#2c3e50' }}>\n                สายรถ: <strong>{carModal.route?.name}</strong> | {Number(carModal.dt?.is_entry)? 'เวลาเข้า' : 'เวลาออก'} <strong>{String(carModal.dt?.time).slice(0,5)}</strong>\n              </div>\n              <div style={styles.modalFormGroup}>\n                <label style={styles.modalLabel}>จำนวนรถ:</label>\n                <input type=\"number\" min={0} value={carModal.value}\n                  onChange={(e)=> setCarModal(m=>({ ...m, value: Math.max(0, Number(e.target.value)||0) }))}\n                  onKeyDown={(e)=>{ if (e.key==='Enter') saveCarPlan(); }}\n                  style={styles.modalInput}\n                  autoFocus\n                />\n              </div>\n              <div style={styles.modalButtonGroup}>\n                <button style={styles.confirmButton} onClick={saveCarPlan}>บันทึก</button>\n                <button style={styles.cancelButton} onClick={closeCarModal}>ยกเลิก</button>\n              </div>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nconst styles = {\n  wrapper: { minHeight:'100vh', background:'#f0f2f5', padding:20 },\n  // stack and panel layout\n  stack: { display:'flex', flexDirection:'column', gap:16, width:'100%', maxWidth:1340, margin:'0 auto' },\n  panelCard: { background:'#fff', borderRadius:24, width:'100%', padding:24, boxShadow:'0 8px 30px rgba(0,0,0,0.12)' },\n  panelCardTight: { background:'#fff', borderRadius:24, width:'100%', padding:0, boxShadow:'0 8px 30px rgba(0,0,0,0.12)', overflow:'hidden' },\n  headerRow: { display:'flex', justifyContent:'space-between', alignItems:'center', marginBottom:16 },\n  title: { fontSize:28, fontWeight:900, margin:0, color:'#2f3e4f' },\n  controls: { display:'flex', alignItems:'center', gap:16, background:'#f7f9fb', borderRadius:14, padding:12, marginBottom:14, flexWrap:'wrap' },\n  label: { fontWeight:700, color:'#2f3e4f' },\n  input: { padding:'10px 12px', borderRadius:10, border:'1px solid #bdc3c7', background:'#fff', fontSize:16, minWidth:120 },\n  primaryBtn: { padding:'10px 14px', borderRadius:10, background:'#1f8ef1', color:'#fff', border:'none', fontWeight:800, cursor:'pointer', marginLeft:'auto' },\n  logoutBtn: { padding:'8px 12px', borderRadius:10, background:'#e74c3c', color:'#fff', border:'none', fontWeight:800, cursor:'pointer' },\n  table: { width:'100%', borderCollapse:'collapse', tableLayout:'fixed' },\n  thMain: { background:'#102a3b', color:'#fff', padding:8, textAlign:'center', fontWeight:900, whiteSpace:'nowrap', fontSize:12, border:'1px solid #e6edf3' },\n  thTime: { color:'#0f2a40', padding:8, textAlign:'center', fontWeight:900, fontSize:14, border:'1px solid #e6edf3' },\n  tdRoute: { border:'1px solid #dfe6ee', padding:8, fontWeight:800, color:'#2f3e4f', width:280, background:'#ffffff', fontSize:13, whiteSpace:'nowrap' },\n  routeIndex: { display:'inline-block', width:24, textAlign:'right', marginRight:6 },\n  tdCell: { border:'1px solid #e6edf3', padding:6, minWidth:60, height:36, background:'#ffffff', textAlign:'center', fontSize:12 },\n  tdTotal: { border:'1px solid #e6edf3', padding:6, minWidth:60, height:36, background:'#f6fbff', textAlign:'center', fontSize:12 },\n  tdRouteTotal: { border:'1px solid #dfe6ee', padding:8, fontWeight:900, color:'#2f3e4f', width:280, background:'#eef6ff', fontSize:13, whiteSpace:'nowrap', textAlign:'center' },\n  overlay: { position:'fixed', top:0, left:0, width:'100%', height:'100%', background:'rgba(0,0,0,0.5)', display:'flex', justifyContent:'center', alignItems:'center', zIndex:1000 },\n  modal: { background:'#fff', padding:30, borderRadius:12, boxShadow:'0 10px 30px rgba(0,0,0,0.2)', width:'90%', maxWidth:500, zIndex:1001, position:'fixed', top:'50%', left:'50%', transform:'translate(-50%, -50%)' },\n  modalTitle: { fontSize:22, fontWeight:600, color:'#2c3e50', marginBottom:20, textAlign:'center' },\n  modalFormGroup: { marginBottom:15 },\n  modalLabel: { display:'block', marginBottom:5, fontWeight:500, color:'#34495e' },\n  modalInput: { width:'100%', padding:10, borderRadius:8, border:'1px solid #bdc3c7', boxSizing:'border-box' },\n  modalButtonGroup: { display:'flex', justifyContent:'flex-end', gap:10, marginTop:20 },\n  confirmButton: { padding:'12px 20px', border:'none', borderRadius:8, backgroundColor:'#2ecc71', color:'#fff', fontWeight:600, cursor:'pointer' },\n  cancelButton: { padding:'12px 20px', border:'1px solid #bdc3c7', borderRadius:8, backgroundColor:'transparent', color:'#7f8c8d', fontWeight:600, cursor:'pointer' },\n};\n\nfunction getTimeColor(idx){\n  const palette = ['#FFFB0D', '#F562D6', '#02AE4E', '#00B0EF', '#F07D2E', '#7230A0'];\n  return palette[idx % palette.length];\n}\n\n// Color utils: blend a base color with white to get softer shades for cell backgrounds\nfunction hexToRgb(hex){\n  let c = (hex || '').replace('#','');\n  if (c.length === 3) c = c.split('').map((ch) => ch + ch).join('');\n  const num = parseInt(c, 16);\n  return {\n    r: (num >> 16) & 255,\n    g: (num >> 8) & 255,\n    b: num & 255,\n  };\n}\nfunction rgbToHex(r,g,b){\n  const toHex = (n) => n.toString(16).padStart(2, '0');\n  return `#${toHex(Math.min(255, Math.max(0, r)))}${toHex(Math.min(255, Math.max(0, g)))}${toHex(Math.min(255, Math.max(0, b)))}`;\n}\n// alpha: 0..1, contribution of base color vs white\nfunction blendWithWhite(hex, alpha){\n  const { r, g, b } = hexToRgb(hex);\n  const nr = Math.round(r * alpha + 255 * (1 - alpha));\n  const ng = Math.round(g * alpha + 255 * (1 - alpha));\n  const nb = Math.round(b * alpha + 255 * (1 - alpha));\n  return rgbToHex(nr, ng, nb);\n}\n// Derive per-time body and car cell backgrounds\nfunction getTimeBodyBg(idx){\n  const base = getTimeColor(idx);\n  return blendWithWhite(base, 0.18); // very light shade\n}\nfunction getTimeTotalBg(idx){\n  const base = getTimeColor(idx);\n  return blendWithWhite(base, 0.14); // even lighter for totals\n}\nfunction getTimeCarBg(idx){\n  const base = getTimeColor(idx);\n  return blendWithWhite(base, 0.32); // slightly stronger shade\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}