{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/sonjutha/Downloads/Bus-system/src/lib/http.js"],"sourcesContent":["// Lightweight client-side fetch utilities with timeout, retries, and safe JSON parsing\n// Usage: import { fetchJSON, postJSON } from '@/lib/http'\n\nconst sleep = (ms) => new Promise((res) => setTimeout(res, ms));\n\nfunction getAuthHeader() {\n  try {\n    const token = localStorage.getItem('token');\n    return token ? { Authorization: `Bearer ${token}` } : {};\n  } catch {\n    return {};\n  }\n}\n\nasync function parseResponse(res) {\n  const ct = res.headers.get('content-type') || '';\n  if (ct.includes('application/json')) {\n    try { return await res.json(); } catch { return null; }\n  }\n  if (res.status === 204) return null;\n  try { return await res.text(); } catch { return null; }\n}\n\nexport async function fetchJSON(url, options = {}, extra = {}) {\n  const {\n    retries = 2,\n    timeout = 10000,\n    signal: externalSignal,\n    retryOn = (res) => !res.ok,\n    cache = 'no-store',\n  } = extra;\n\n  // Merge headers with auth if not present\n  const baseHeaders = { ...(options.headers || {}), ...getAuthHeader() };\n\n  let attempt = 0;\n  let lastError = null;\n  let controller;\n\n  while (attempt <= retries) {\n    attempt += 1;\n    controller = new AbortController();\n    const tid = setTimeout(() => controller.abort(), timeout);\n    try {\n      const res = await fetch(url, {\n        ...options,\n        headers: baseHeaders,\n        signal: externalSignal || controller.signal,\n        cache,\n      });\n      clearTimeout(tid);\n      if (retryOn && retryOn(res) && attempt <= retries && (options.method || 'GET').toUpperCase() === 'GET') {\n        // backoff: 200ms * 2^(attempt-1)\n        await sleep(200 * Math.pow(2, attempt - 1));\n        continue;\n      }\n      const data = await parseResponse(res);\n      if (!res.ok) {\n        const err = new Error((data && (data.error || data.message)) || `HTTP ${res.status}`);\n        err.status = res.status;\n        throw err;\n      }\n      return data;\n    } catch (err) {\n      clearTimeout(tid);\n      lastError = err;\n      // Only retry GETs and only on network/timeouts or 5xx\n      const method = (options.method || 'GET').toUpperCase();\n      const status = err?.status || 0;\n      const isRetryableStatus = status >= 500 || status === 0; // network/timeout\n      if (method !== 'GET' || attempt > retries || !isRetryableStatus) break;\n      await sleep(200 * Math.pow(2, attempt - 1));\n    }\n  }\n  // Return null to let callers decide fallbacks without breaking UI\n  return null;\n}\n\nexport async function postJSON(url, body, options = {}, extra = {}) {\n  const { timeout = 10000, signal: externalSignal } = extra;\n  const controller = new AbortController();\n  const tid = setTimeout(() => controller.abort(), timeout);\n  try {\n    const res = await fetch(url, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', ...(options.headers || {}), ...getAuthHeader() },\n      body: JSON.stringify(body || {}),\n      signal: externalSignal || controller.signal,\n    });\n    clearTimeout(tid);\n    const data = await parseResponse(res);\n    if (!res.ok) {\n      const err = new Error((data && (data.error || data.message)) || `HTTP ${res.status}`);\n      err.status = res.status;\n      throw err;\n    }\n    return data;\n  } catch (err) {\n    clearTimeout(tid);\n    throw err;\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///Users/sonjutha/Downloads/Bus-system/src/app/dashboard/page.jsx"],"sourcesContent":["\"use client\";\n\n// Weekly dashboard (จันทร์-เสาร์) แสดง 3 ช่วงเวลา: เช้า / บ่าย / เย็น\n// ดึงข้อมูล products + bookings จาก API เดิม /api/products และ /api/bookings?date=YYYY-MM-DD ต่อวัน\n// NOTE: ใช้โค้ดบางส่วนจากหน้า main page.js แต่สรุปให้ง่ายและอ่านง่ายขึ้น\n\nimport { useEffect, useState, useCallback } from \"react\";\nimport html2canvas from \"html2canvas\";\nimport { fetchJSON } from '@/lib/http';\n\n// Toggle meta UI (title, debug, note)\nconst SHOW_META = false;\n\n// Mapping helpers\nconst PERIODS = [\n\t{ key: \"morning\", label: \"08:00 - 12:00\", th: \"เช้า\" },\n\t{ key: \"afternoon\", label: \"13:00 - 17:00\", th: \"บ่าย\" },\n\t{ key: \"evening\", label: \"18:00 - 20:00\", th: \"เย็น\" },\n];\n\n// Truck -> period mapping (เพราะตาราง bookings ยังไม่มีคอลัมน์ period)\nconst TRUCK_PERIOD = {\n\t1: \"morning\",\n\t2: \"morning\",\n\t3: \"afternoon\",\n\t4: \"afternoon\",\n\t5: \"evening\",\n\t6: \"evening\",\n};\n\n// Utility: format date to yyyy-mm-dd (LOCAL time, ไม่ใช้ toISOString ป้องกัน timezone ลบวัน)\nfunction fmt(date) {\n\tconst y = date.getFullYear();\n\tconst m = String(date.getMonth() + 1).padStart(2, '0');\n\tconst d = String(date.getDate()).padStart(2, '0');\n\treturn `${y}-${m}-${d}`;\n}\n\n// Find monday of the week for provided date (treat Sun as next day, week starts Mon)\nfunction getWeekStart(date) {\n\tconst d = new Date(date);\n\tconst day = d.getDay(); // 0=Sun 1=Mon ... 6=Sat\n\t// If Sunday (0) -> go back 6 days; else go back (day-1)\n\tconst diff = day === 0 ? -6 : 1 - day;\n\td.setDate(d.getDate() + diff);\n\treturn d; // Monday\n}\n\n// Produce array Monday..Saturday (6 days)\nfunction buildWeekDays(anchor) {\n\tconst start = getWeekStart(anchor);\n\treturn Array.from({ length: 6 }, (_, i) => {\n\t\tconst d = new Date(start);\n\t\td.setDate(start.getDate() + i);\n\t\treturn d;\n\t});\n}\n\nexport default function DashboardWeek() {\n\tconst [anchorDate, setAnchorDate] = useState(new Date()); // any date inside desired week\n\tconst [weekDays, setWeekDays] = useState(buildWeekDays(new Date()));\n\tconst [products, setProducts] = useState([]);\n\tconst [loadingProducts, setLoadingProducts] = useState(false);\n\tconst PRODUCTS_POLL_MS = 5000; // poll every 5s\n\tconst BOOKINGS_POLL_MS = 10000; // poll bookings every 10s\n\tconst [bookingsByDate, setBookingsByDate] = useState({}); // { 'yyyy-mm-dd': [booking,...] }\n\tconst [loading, setLoading] = useState(false);\n\tconst [user, setUser] = useState(null);\n// public view: ไม่ต้อง login เพื่อดูยอดรวม\n\n\t// Load user/token from localStorage\n\tuseEffect(() => {\n\t\tif (typeof window === \"undefined\") return;\n\t\tconst u = localStorage.getItem(\"user\");\n\t\tif (u) setUser(JSON.parse(u));\n\t}, []);\n\n\t// Rebuild week when anchor changes\n\tuseEffect(() => {\n\t\tsetWeekDays(buildWeekDays(anchorDate));\n\t}, [anchorDate]);\n\n\t// Load products (public GET doesn't need token) + polling\n\tuseEffect(() => {\n\t\tlet abort = false;\n\t\t\tasync function loadProducts(){\n\t\t\tsetLoadingProducts(true);\n\t\t\ttry {\n\t\t\t\t\tconst data = await fetchJSON('/api/products', {}, { cache:'no-store' });\n\t\t\t\t\tif(!abort) setProducts(Array.isArray(data) ? data : []);\n\t\t\t} catch(e){ if(!abort) setProducts([]); }\n\t\t\tfinally { if(!abort) setLoadingProducts(false); }\n\t\t}\n\t\tloadProducts();\n\t\tconst id = setInterval(loadProducts, PRODUCTS_POLL_MS);\n\t\treturn ()=>{ abort = true; clearInterval(id); };\n\t}, []);\n\n\t// Load bookings for each day in week\n\tconst loadBookingsWeek = useCallback(async () => {\n\t\t\tconst token = typeof window !== 'undefined' ? localStorage.getItem(\"token\") : null; // optional\n\t\tsetLoading(true);\n\t\tconst acc = {};\n\t\tawait Promise.all(weekDays.map(async (d) => {\n\t\t\tconst dateStr = fmt(d);\n\t\t\ttry {\n\t\t\t\t\tconst data = await fetchJSON(`/api/bookings?date=${dateStr}`, {}, { cache:'no-store' });\n\t\t\t\t\tacc[dateStr] = Array.isArray(data) ? data : [];\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('โหลด bookings ล้มเหลว', dateStr, e);\n\t\t\t\tacc[dateStr] = [];\n\t\t\t}\n\t\t}));\n\t\tsetBookingsByDate(acc);\n\t\tsetLoading(false);\n\t}, [weekDays]);\n\n\tuseEffect(() => {\n\t\tloadBookingsWeek();\n\t\tconst id = setInterval(() => loadBookingsWeek(), BOOKINGS_POLL_MS);\n\t\treturn () => clearInterval(id);\n\t}, [loadBookingsWeek]);\n\n\t// reload เมื่อ user เปลี่ยน (optional)\n\tuseEffect(() => { loadBookingsWeek(); }, [user, loadBookingsWeek]);\n\n\t// Helper: count distinct trucks for a product within a period on a date\n\tfunction countProductPeriod(productId, dateStr, periodKey){\n\t\tconst list = (bookingsByDate[dateStr] || []).filter(b => b.product_id === productId && TRUCK_PERIOD[b.truck_number] === periodKey);\n\t\treturn new Set(list.map(b=> b.truck_number)).size; // distinct truck count\n\t}\n\n\tfunction nextWeek() {\n\t\tconst d = new Date(anchorDate);\n\t\td.setDate(d.getDate() + 7);\n\t\tsetAnchorDate(d);\n\t}\n\tfunction prevWeek() {\n\t\tconst d = new Date(anchorDate);\n\t\td.setDate(d.getDate() - 7);\n\t\tsetAnchorDate(d);\n\t}\n\n\tconst handleSaveAsImage = () => {\n\t\tconst element = document.getElementById(\"dashboard-week-content\");\n\t\thtml2canvas(element).then((canvas) => {\n\t\t  const image = canvas.toDataURL(\"image/png\");\n\t\t  const link = document.createElement(\"a\");\n\t\t  link.href = image;\n\t\t  link.download = \"dashboard-week.png\";\n\t\t  link.click();\n\t\t});\n\t  };\n\n\treturn (\n\t\t<div style={{ padding: 20 }} id=\"dashboard-week-content\">\n            {/* เปิดใช้งาน debug UI ได้ที่ ตัวแปร SHOW_META ด้านบนเปลี่ยน false เป็น true */}\n\t\t\t{SHOW_META && (\n\t\t\t\t<>\n\t\t\t\t\t<h1 style={{ marginBottom: 10 }}>Weekly Dashboard (ทดลอง)</h1>\n\t\t\t\t\t{/* Debug status */}\n\t\t\t\t\t<div style={{fontSize:12, marginBottom:8, color:'#444'}}>\n\t\t\t\t\t\t<span>โหลดแล้ว: {Object.keys(bookingsByDate).length} วัน</span>{' | '}\n\t\t\t\t\t\t<span>ตัวอย่าง วันพุธ 27/08/2025 bookings: {(bookingsByDate['2025-08-27']||[]).length}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t<div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 20 }}>\n\t\t\t\t<div style={{ display: \"flex\", gap: 10, fontWeight: '600' }}>\n\t\t\t\t\t<button onClick={prevWeek}>◀ สัปดาห์ก่อน</button>\n\t\t\t\t\t<div>\n\t\t\t\t\t\tสัปดาห์ของวันที่ {fmt(getWeekStart(anchorDate))} - {fmt(weekDays[weekDays.length - 1])}\n\t\t\t\t\t</div>\n\t\t\t\t\t<button onClick={nextWeek}>สัปดาห์ถัดไป ▶</button>\n\t\t\t\t\t{SHOW_META && (\n\t\t\t\t\t\t<button onClick={loadBookingsWeek} disabled={loading}>\n\t\t\t\t\t\t{loading ? \"กำลังโหลด...\" : \"รีเฟรช\"}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tonClick={handleSaveAsImage}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tpadding: \"8px 12px\",\n\t\t\t\t\t\tborder: \"none\",\n\t\t\t\t\t\tborderRadius: \"8px\",\n\t\t\t\t\t\tbackgroundColor: \"#2ecc71\",\n\t\t\t\t\t\tcolor: \"white\",\n\t\t\t\t\t\tfontWeight: \"600\",\n\t\t\t\t\t\tcursor: \"pointer\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tบันทึกเป็นรูปภาพ\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div style={{ overflowX: \"auto\" }}>\n\t\t\t\t<table style={{ borderCollapse: \"collapse\", width: \"100%\", minWidth: 900 }}>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th style={thStyle} rowSpan={2}>ช่องที่</th>\n\t\t\t\t\t\t\t<th style={thStyle} rowSpan={2}>ประเภท</th>\n\t\t\t\t\t\t\t<th style={thStyle} rowSpan={2}>Vendor</th>\n\t\t\t\t\t\t\t{weekDays.map((d,i) => (\n\t\t\t\t\t\t\t\t<th key={fmt(d)} style={{ ...thStyle, background: dayColor(i), color: i===0 ? '#000' : '#fff' }} colSpan={PERIODS.length}>\n\t\t\t\t\t\t\t\t\t{d.toLocaleDateString('th-TH', { weekday:'long', day:'2-digit', month:'2-digit', year:'numeric'})}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t{weekDays.map((d,i) => (\n\t\t\t\t\t\t\t\tPERIODS.map(p => (\n\t\t\t\t\t\t\t\t\t<th key={fmt(d)+p.key} style={{ ...thStyle, background: dayColor(i), color: i===0 ? '#000' : '#fff' }}>{p.th}</th>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{products.map((prod, idx) => (\n\t\t\t\t\t\t\t<tr key={prod.id}>\n\t\t\t\t\t\t\t\t<td style={tdIndex}>{idx + 1}</td>{/* sequential numbering as requested */}\n\t\t\t\t\t\t\t\t<td style={tdMain}>{prod.name}</td>\n\t\t\t\t\t\t\t\t<td style={tdMain}>{prod.vendor}</td>\n\t\t\t\t\t\t\t\t{weekDays.flatMap((d) => (\n\t\t\t\t\t\t\t\t\tPERIODS.map((p) => {\n\t\t\t\t\t\t\t\t\t\tconst dateStr = fmt(d);\n\t\t\t\t\t\t\t\t\t\tconst cnt = countProductPeriod(prod.id, dateStr, p.key);\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<td key={prod.id+dateStr+p.key} style={tdCell}>\n\t\t\t\t\t\t\t\t\t\t\t\t{cnt > 0 ? `${cnt} คัน` : '-'}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t{products.length === 0 && (\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td style={tdEmpty} colSpan={3 + weekDays.length * PERIODS.length}>{loadingProducts ? 'กำลังโหลดสินค้า...' : 'ไม่มีสินค้า'}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t{SHOW_META && (\n\t\t\t\t<p style={{ marginTop: 20, fontSize: 12, color: '#555' }}>\n\t\t\t\t\tดึงข้อมูลจริงแล้ว (poll ทุก {BOOKINGS_POLL_MS/1000}s) และแยกช่วงเวลาแบบอนุมานจากหมายเลขรถ (1-2=เช้า,3-4=บ่าย,5-6=เย็น). หากจะให้แม่นยำควรเพิ่มคอลัมน์ period ในตาราง bookings.\n\t\t\t\t</p>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\n// ---- styles helpers ----\nconst thStyle = {\n\tpadding: 8,\n\tbackground: '#083fc0ff',\n\tcolor: 'white',\n\tborder: '1px solid #334155',\n\tfontSize: 12,\n};\nconst tdMain = {\n\tpadding: 6,\n\tborder: '1px solid #000',\n\tbackground: '#fafafa',\n\tfontSize: 12,\n\twhiteSpace: 'nowrap',\n\tfontWeight: '600'\n};\nconst tdIndex = { ...tdMain, textAlign: 'center', width: 40 };\nconst tdCell = {\n\tpadding: 4,\n\tborder: '1px solid #000',\n\ttextAlign: 'center',\n\tfontSize: 12,\n\tminWidth: 55,\n\tfontWeight: '600',\n};\nconst tdEmpty = { padding: 20, textAlign: 'center', border: '1px solid #e5e7eb' };\n\nfunction periodColor(key){\n\tswitch(key){\n\t\tcase 'morning': return '#1d4ed8';\n\t\tcase 'afternoon': return '#10b981';\n\t\tcase 'evening': return '#dc2626';\n\t\tdefault: return '#475569';\n\t}\n}\n\n// สีรายวันสำหรับ header + sub headers ให้สีเดียวกันทั้งวัน\nfunction dayColor(index){\n\tconst palette = [\n\t\t'#FFFB0D', // Monday\n\t\t'#F562D6', // Tuesday\n\t\t'#02AE4E', // Wednesday\n\t\t'#F07D2E', // Thursday\n\t\t'#00B0EF', // Friday\n\t\t'#7230A0', // Saturday\n\t];\n\treturn palette[index % palette.length];\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}